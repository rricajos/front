<!doctype html>
<html lang="es" data-theme="dark">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>Avatar Gespropiedad</title>
  
  <!-- PWA Meta Tags -->
  <meta name="description" content="Asistente virtual interactivo de Gespropiedad">
  <meta name="theme-color" content="#3b82f6">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Avatar">
  
  <!-- PWA Manifest -->
  <link rel="manifest" href="./manifest.json">
  
  <!-- Icons -->
  <link rel="icon" type="image/png" sizes="32x32" href="./icons/icon-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="./icons/icon-16.png">
  <link rel="apple-touch-icon" href="./icons/icon-192.png">
  
  <!-- Styles -->
  <link rel="stylesheet" href="./css/styles.css">
  
  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
</head>

<body>
  <!-- App Loader -->
  <div class="app-loader" id="appLoader">
    <svg class="loader-logo" viewBox="0 0 226.1 219.1" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <linearGradient id="loaderGrad1" x1="56" y1="178.7" x2="56" y2="0" gradientUnits="userSpaceOnUse">
          <stop offset="0" stop-color="#1ca4af"/><stop offset="1" stop-color="#1c3768"/>
        </linearGradient>
        <linearGradient id="loaderGrad2" x1="139.2" y1="53.5" x2="232.6" y2="215.2" gradientUnits="userSpaceOnUse">
          <stop offset="0" stop-color="#1ca4af"/><stop offset="1" stop-color="#1c3768"/>
        </linearGradient>
      </defs>
      <polygon fill="url(#loaderGrad1)" points="0 0 73.6 111 26.2 178.7 65.6 178.7 111.9 109.9 41.8 0 0 0"/>
      <polygon fill="url(#loaderGrad2)" points="194.6 45.6 150.2 111 226 219 186.7 219 111.9 109.9 152.9 45.6 194.6 45.6"/>
    </svg>
    <div class="loader-spinner"></div>
    <p class="loader-text">Cargando avatar...</p>
  </div>

  <!-- Settings Button -->
  <button class="settings-btn" id="settingsBtn" title="Ajustes">
    <i data-lucide="settings"></i>
  </button>

  <div class="start-overlay" id="startOverlay">
    <svg class="start-logo" viewBox="0 0 226.1 219.1" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <linearGradient id="grad1" x1="56" y1="178.7" x2="56" y2="0" gradientUnits="userSpaceOnUse">
          <stop offset="0" stop-color="#1ca4af"/><stop offset="1" stop-color="#1c3768"/>
        </linearGradient>
        <linearGradient id="grad2" x1="139.2" y1="53.5" x2="232.6" y2="215.2" gradientUnits="userSpaceOnUse">
          <stop offset="0" stop-color="#1ca4af"/><stop offset="1" stop-color="#1c3768"/>
        </linearGradient>
      </defs>
      <polygon fill="url(#grad1)" points="0 0 73.6 111 26.2 178.7 65.6 178.7 111.9 109.9 41.8 0 0 0"/>
      <polygon fill="url(#grad2)" points="194.6 45.6 150.2 111 226 219 186.7 219 111.9 109.9 152.9 45.6 194.6 45.6"/>
    </svg>
    <h1>Asistente Virtual</h1>
    <p>Conexia Telecom · Gestpropiedad</p>
    <div class="start-buttons">
      <button class="start-btn" id="startPresentationBtn"><i data-lucide="tv"></i>Modo Presentación</button>
      <button class="start-btn secondary" id="startNormalBtn"><i data-lucide="settings-2"></i>Panel de Control</button>
    </div>
    <button class="start-btn install-overlay hidden" id="installAppBtn"><i data-lucide="download"></i>Instalar App</button>
  </div>

  <div class="presentation-container" id="presentationContainer">
    <button class="exit-presentation-btn" id="exitPresentationBtn" title="Salir (ESC)"><i data-lucide="x"></i></button>
    <div class="presentation-avatar" id="presentationAvatar">
      <div class="pres-rive-wrap"><canvas id="presentationCanvas" width="800" height="800"></canvas></div>
    </div>
    <img src="./gestpropiedad.jpg" alt="GestPropiedad" class="presentation-logo">
    <div class="presentation-subtitle" id="presentationSubtitle"></div>
  </div>

  <div class="stage">
    <div class="avatar">
      <div class="rive-wrap" id="riveWrap">
        <button class="fullscreen-btn" id="fullscreenBtn" title="Pantalla completa"><i data-lucide="maximize-2"></i></button>
        <canvas id="riveCanvas" width="600" height="600"></canvas>
      </div>
      <div class="css-avatar" id="cssAvatar">
        <div class="head">
          <div class="eye left"><div class="pupil"></div></div>
          <div class="eye right"><div class="pupil"></div></div>
          <div class="mouth" id="cssMouth"></div>
        </div>
      </div>
    </div>

    <div class="panel">
      <div class="status-bar">
        <span class="status-dot loading" id="statusDot"></span>
        <span class="status-text" id="statusText">Inicializando...</span>
      </div>
      <div class="debug" id="debug"></div>
      <div class="bubble" id="bubble">Listo para recibir eventos.</div>
      <div class="btn-row">
        <button class="btn primary" id="testTalkBtn"><i data-lucide="play"></i>Test</button>
        <button class="btn" id="idleBtn"><i data-lucide="pause"></i>Detener</button>
      </div>
      <div class="btn-row">
        <button class="btn primary" id="enterPresentationBtn"><i data-lucide="tv"></i>Modo Presentación</button>
      </div>
      <div class="settings-section">
        <label><i data-lucide="volume-2"></i>Voz TTS</label>
        <select id="voiceSelect" class="voice-select"><option value="">Cargando voces...</option></select>
      </div>
    </div>
  </div>

  <script type="module" src="./js/main.js"></script>
</body>
</html>
